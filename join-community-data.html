<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Community</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="shortcut icon" href="/assest/logo/VTR GROUP LOGO_Gold.png" type="image/x-icon">
</head>
<body class="bg-gray-100 p-6">
    <div class="container mx-auto">
        <h1 class="text-2xl font-bold mb-4">Join Community Details</h1>
        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-md text-center">
            <thead >
                <tr class="bg-gray-200">
                    <th class="border px-4 py-2">ID</th>
                  
                    <th class="border px-4 py-2">Email</th>
                  
                </tr>
            </thead>
            <tbody id="customerTableBody"></tbody>
        </table>
    </div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
  // Create a single Supabase client for interacting with your database
  let supabase = createClient(
    "https://xobqzvqprefbtoyofgvh.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhvYnF6dnFwcmVmYnRveW9mZ3ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyMzU5MTQsImV4cCI6MjA1NjgxMTkxNH0.CpPx4HSiWqUSXsVkp7CabeWmn64lDONNK_lbPfJuJHY"
  );
        async function fetchCustomers() {
            try {
                let { data, error } = await supabase.from('join-community').select('*');
                if (error) {
                    console.error('Error fetching customers:', error);
                    return;
                }
                renderTable(data);
            } catch (err) {
                console.error('Unexpected error:', err);
            }
        }
        function renderTable(customers) {
            const tableBody = document.getElementById("customerTableBody");
            tableBody.innerHTML = ""; // Clear existing data
            customers.forEach(customer => {
                let row = `<tr class='border'>
                 
                    <td class='border px-4 py-2'>${customer.id}</td>
                  
                    <td class='border px-4 py-2'>${customer.email}</td>
                  
                </tr>`;
                tableBody.innerHTML += row;
            });
        }
        document.addEventListener("DOMContentLoaded", fetchCustomers);
    </script>
</body>
</html>